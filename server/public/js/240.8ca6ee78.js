"use strict";(self["webpackChunkvj_admin"]=self["webpackChunkvj_admin"]||[]).push([[240],{89:function(e,l){l.Z=(e,l)=>{const o=e.__vccOpts||e;for(const[a,t]of l)o[a]=t;return o}},9926:function(e,l,o){o.d(l,{Z:function(){return c}});var a=o(3396),t=o(4870),n=o(2483),r=o(65),u=o(7178);o(7247);const d={class:"dialog-footer"};var i={__name:"index",props:{isDialog:Boolean,info:Object,eventMark:String},emits:["isDialogOrder"],setup(e,{emit:l}){const o=e,i=(0,r.oR)(),s=((0,n.yj)(),(0,n.tv)(),(0,t.iH)(!1),(0,a.Fl)((()=>i.state.appSwitch.currentPage)),()=>{if(o.info.goodsName&&o.info.saleNumber&&o.info.goodsPrice&&o.info.clientName)if("orderHeader"===o.eventMark){i.dispatch("order/getStock",o.info.goodsName);const e=(0,a.Fl)((()=>i.state.order.stock));setTimeout((()=>{if(0!==e.value.goodsNumber&&e.value.goodsNumber>=o.info.saleNumber){i.dispatch("order/addOrder",o.info);let l=e.value.goodsNumber-o.info.saleNumber;i.dispatch("order/upStock",{num:l,goodsName:o.info.goodsName})}else u.z8.warning(`库存不足！仅剩 ${e.value.goodsNumber} 件商品`)}),500)}else"orderTable"===o.eventMark?i.dispatch("order/upOrder",o.info):console.log("未知的事件标识");else u.z8.warning("请填写内容");l("isDialogOrder",!1)}),c=()=>{l("isDialogOrder",!1)};return(l,n)=>{const r=(0,a.up)("el-input"),u=(0,a.up)("el-form-item"),i=(0,a.up)("el-input-number"),m=(0,a.up)("el-form"),p=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(f,{"model-value":(0,t.SU)(o).isDialog,title:"编辑",width:"32%","destroy-on-close":"",onBeforeClose:c,onClose:c,draggable:""},{footer:(0,a.w5)((()=>[(0,a._)("span",d,[(0,a.Wm)(p,{onClick:c},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),"orderTable"===e.eventMark?((0,a.wg)(),(0,a.j4)(p,{key:0,type:"primary",onClick:s},{default:(0,a.w5)((()=>[(0,a.Uk)(" 更新 ")])),_:1})):((0,a.wg)(),(0,a.j4)(p,{key:1,type:"primary",onClick:s},{default:(0,a.w5)((()=>[(0,a.Uk)(" 添加 ")])),_:1}))])])),default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"商品名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:(0,t.SU)(o).info.goodsName,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,t.SU)(o).info.goodsName=e),autocomplete:"off",style:{width:"300px"},placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"销售数量"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:(0,t.SU)(o).info.saleNumber,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,t.SU)(o).info.saleNumber=e),step:1},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"商品价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:(0,t.SU)(o).info.goodsPrice,"onUpdate:modelValue":n[2]||(n[2]=e=>(0,t.SU)(o).info.goodsPrice=e),precision:2,step:.5},null,8,["modelValue","step"])])),_:1}),(0,a.Wm)(u,{label:"顾客姓名"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:(0,t.SU)(o).info.clientName,"onUpdate:modelValue":n[3]||(n[3]=e=>(0,t.SU)(o).info.clientName=e),autocomplete:"off",placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model-value"])}}};const s=i;var c=s},7240:function(e,l,o){o.r(l),o.d(l,{default:function(){return m}});var a=o(3396),t=o(4870),n=o(9926),r=o(2483),u=o(65);const d={class:"container"};var i={__name:"index",setup(e){const l=(0,u.oR)();(0,r.yj)(),(0,r.tv)();let o=(0,t.iH)(!1);const i=(0,t.iH)("orderHeader");let s=(0,t.iH)(!1);const c=(0,a.Fl)((()=>l.state.appSwitch.currentPage)),m=(0,t.qj)({goodsName:null,saleNumber:0,clientName:null,goodsPrice:0}),p=(0,t.qj)({clientName:null,page:c.value||1}),f=()=>{p.clientName?(s.value=!0,p.page=c.value,l.dispatch("order/getSearchOrder",p),s.value=!1):(s.value=!1,l.dispatch("order/getOrder",c.value))},g=()=>{o.value=!0},v=e=>{o.value=e};return(0,a.YP)(c,((e,o)=>{e!==o&&(!0===s.value?(s.value=!1,p.page=c.value,l.dispatch("order/getSearchOrder",p)):l.dispatch("order/getOrder",c.value))})),(e,l)=>{const r=(0,a.up)("el-button"),u=(0,a.up)("el-input");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",d,[(0,a.Wm)(u,{class:"input",modelValue:p.clientName,"onUpdate:modelValue":l[1]||(l[1]=e=>p.clientName=e),placeholder:"请输入姓名查询"},{append:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"btn",onClick:l[0]||(l[0]=e=>f())},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(r,{class:"addBtn",type:"primary",plain:"",onClick:l[2]||(l[2]=e=>g())},{default:(0,a.w5)((()=>[(0,a.Uk)("新增订单")])),_:1})]),(0,a.Wm)(n.Z,{isDialog:(0,t.SU)(o),info:m,eventMark:i.value,onIsDialogOrder:v},null,8,["isDialog","info","eventMark"])],64)}}},s=o(89);const c=(0,s.Z)(i,[["__scopeId","data-v-d00a5ae4"]]);var m=c}}]);
//# sourceMappingURL=240.8ca6ee78.js.map