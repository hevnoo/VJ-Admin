"use strict";(self["webpackChunkvj_admin"]=self["webpackChunkvj_admin"]||[]).push([[92],{89:function(e,o){o.Z=(e,o)=>{const l=e.__vccOpts||e;for(const[t,a]of o)l[t]=a;return l}},9926:function(e,o,l){l.d(o,{Z:function(){return m}});var t=l(3396),a=l(4870),n=l(2483),r=l(65),i=l(7178);l(7247);const d={class:"dialog-footer"};var u={__name:"index",props:{isDialog:Boolean,info:Object,eventMark:String},emits:["isDialogOrder"],setup(e,{emit:o}){const l=e,u=(0,r.oR)(),s=((0,n.yj)(),(0,n.tv)(),(0,a.iH)(!1),(0,t.Fl)((()=>u.state.appSwitch.currentPage)),()=>{if(l.info.goodsName&&l.info.saleNumber&&l.info.goodsPrice&&l.info.clientName)if("orderHeader"===l.eventMark){u.dispatch("order/getStock",l.info.goodsName);const e=(0,t.Fl)((()=>u.state.order.stock));setTimeout((()=>{if(0!==e.value.goodsNumber&&e.value.goodsNumber>=l.info.saleNumber){u.dispatch("order/addOrder",l.info);let o=e.value.goodsNumber-l.info.saleNumber;u.dispatch("order/upStock",{num:o,goodsName:l.info.goodsName})}else i.z8.warning(`库存不足！仅剩 ${e.value.goodsNumber} 件商品`)}),500)}else"orderTable"===l.eventMark?u.dispatch("order/upOrder",l.info):console.log("未知的事件标识");else i.z8.warning("请填写内容");o("isDialogOrder",!1)}),m=()=>{o("isDialogOrder",!1)};return(o,n)=>{const r=(0,t.up)("el-input"),i=(0,t.up)("el-form-item"),u=(0,t.up)("el-input-number"),c=(0,t.up)("el-form"),p=(0,t.up)("el-button"),f=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.j4)(f,{"model-value":(0,a.SU)(l).isDialog,title:"编辑",width:"32%","destroy-on-close":"",onBeforeClose:m,onClose:m,draggable:""},{footer:(0,t.w5)((()=>[(0,t._)("span",d,[(0,t.Wm)(p,{onClick:m},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),"orderTable"===e.eventMark?((0,t.wg)(),(0,t.j4)(p,{key:0,type:"primary",onClick:s},{default:(0,t.w5)((()=>[(0,t.Uk)(" 更新 ")])),_:1})):((0,t.wg)(),(0,t.j4)(p,{key:1,type:"primary",onClick:s},{default:(0,t.w5)((()=>[(0,t.Uk)(" 添加 ")])),_:1}))])])),default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"商品名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,a.SU)(l).info.goodsName,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,a.SU)(l).info.goodsName=e),autocomplete:"off",style:{width:"300px"},placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"销售数量"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:(0,a.SU)(l).info.saleNumber,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,a.SU)(l).info.saleNumber=e),step:1},null,8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"商品价格"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:(0,a.SU)(l).info.goodsPrice,"onUpdate:modelValue":n[2]||(n[2]=e=>(0,a.SU)(l).info.goodsPrice=e),precision:2,step:.5},null,8,["modelValue","step"])])),_:1}),(0,t.Wm)(i,{label:"顾客姓名"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:(0,a.SU)(l).info.clientName,"onUpdate:modelValue":n[3]||(n[3]=e=>(0,a.SU)(l).info.clientName=e),autocomplete:"off",placeholder:"请输入姓名"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model-value"])}}};const s=u;var m=s},4092:function(e,o,l){l.r(o),l.d(o,{default:function(){return m}});l(7658);var t=l(3396),a=l(4870),n=l(9926),r=l(2728);l(5743);const i={style:{"margin-top":"10px","margin-left":"5px"}};var d={__name:"index",setup(e){const o=(0,a.iH)(null);let l=(0,a.iH)(!1);const d=(0,a.iH)("orderTable");let u=(0,a.qj)({goodsName:null,saleNumber:0,clientName:null,goodsPrice:0});const s=(0,t.Fl)((()=>r.Z.state.order.orderList)),m=e=>{l.value=e},c=(e,o)=>{u=o,l.value=!0},p=(e,o)=>{const l={id:o.id};r.Z.dispatch("order/deleOrder",l)},f=e=>{e?e.forEach((e=>{o.value.toggleRowSelection(e,void 0)})):o.value.clearSelection()},g=()=>{let e=[];if(0!==o.value.getSelectionRows().length){o.value.getSelectionRows().map((o=>{e.push(o.id)}));const l={id:e};r.Z.dispatch("order/deleOrder",l)}else console.log("未选中")},w=e=>{};return(e,r)=>{const b=(0,t.up)("el-table-column"),v=(0,t.up)("EditPen"),_=(0,t.up)("el-icon"),k=(0,t.up)("Delete"),W=(0,t.up)("el-popconfirm"),N=(0,t.up)("el-table"),h=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(N,{ref_key:"tableRef",ref:o,data:(0,a.SU)(s),style:{width:"100%"},onSelectionChange:w,border:!0,fit:""},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{type:"selection",width:"55"}),(0,t.Wm)(b,{property:"id",label:"ID",width:"70"}),(0,t.Wm)(b,{prop:"saleDate",label:"出售日期","show-overflow-tooltip":""}),(0,t.Wm)(b,{prop:"goodsName",label:"商品名称"}),(0,t.Wm)(b,{prop:"goodsPrice",label:"商品价格"}),(0,t.Wm)(b,{prop:"saleNumber",label:"销售数量"}),(0,t.Wm)(b,{prop:"clientName",label:"顾客姓名"}),(0,t.Wm)(b,{label:"操作",width:"150"},{default:(0,t.w5)((e=>[(0,t.Wm)(_,{onClick:o=>c(e.$index,e.row),style:{margin:"auto 18px auto 5px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v)])),_:2},1032,["onClick"]),(0,t.Wm)(W,{title:"确认要删除吗?","confirm-button-text":"删除","cancel-button-text":"取消",onConfirm:o=>p(e.$index,e.row)},{reference:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k)])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",i,[(0,t.Wm)(h,{onClick:r[0]||(r[0]=e=>f())},{default:(0,t.w5)((()=>[(0,t.Uk)("清空")])),_:1}),(0,t.Wm)(h,{onClick:r[1]||(r[1]=e=>g())},{default:(0,t.w5)((()=>[(0,t.Uk)("批量删除")])),_:1})]),(0,t.Wm)(n.Z,{isDialog:(0,a.SU)(l),info:(0,a.SU)(u),eventMark:d.value,onIsDialogOrder:m},null,8,["isDialog","info","eventMark"])],64)}}},u=l(89);const s=(0,u.Z)(d,[["__scopeId","data-v-4d697cf2"]]);var m=s}}]);
//# sourceMappingURL=92.982d4890.js.map