"use strict";(self["webpackChunkvj_admin"]=self["webpackChunkvj_admin"]||[]).push([[907],{89:function(e,o){o.Z=(e,o)=>{const l=e.__vccOpts||e;for(const[a,s]of o)l[a]=s;return l}},3668:function(e,o,l){l.d(o,{Z:function(){return g}});var a=l(3396),s=l(4870),d=l(2483),t=l(65),u=l(7178);l(7247);const r=["src"],m={class:"dialog-footer"};var n={__name:"index",props:{isDialog:Boolean,form:Object,eventMark:String},emits:["isDialogGoods","sendImg"],setup(e,{emit:o}){const l=e,n=(0,t.oR)(),c=((0,d.yj)(),(0,d.tv)(),(0,s.iH)(!1),(0,a.Fl)((()=>n.state.classes.classList))),i=((0,a.Fl)((()=>n.state.goods.currentPage)),e=>{o("sendImg",e.data)}),g=e=>{const o="image/jpeg"===e.type,l=e.size/1024/1024<2;return o||u.z8.error("上传头像图片只能是 JPG 格式!"),l||u.z8.error("上传头像图片大小不能超过 2MB!"),o&&l},p=()=>{l.form.goodsName&&l.form.goodsNumber&&l.form.goodsPrice&&l.form.goodsClass?"searchGoods"===l.eventMark?n.dispatch("goods/addGoods",l.form):"goodsTable"===l.eventMark?n.dispatch("goods/updateGoods",l.form):console.log("未知的事件标识"):u.z8.warning("商品名称、价格、数量或类别不能为空"),o("isDialogGoods",!1)},f=()=>{o("isDialogGoods",!1)};return(o,d)=>{const t=(0,a.up)("el-input"),u=(0,a.up)("el-form-item"),n=(0,a.up)("el-input-number"),v=(0,a.up)("el-option"),_=(0,a.up)("el-select"),b=(0,a.up)("Plus"),w=(0,a.up)("el-icon"),U=(0,a.up)("el-upload"),k=(0,a.up)("el-form"),V=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{"model-value":(0,s.SU)(l).isDialog,title:"编辑","destroy-on-close":"",onBeforeClose:f,onClose:f,draggable:""},{footer:(0,a.w5)((()=>[(0,a._)("span",m,[(0,a.Wm)(V,{onClick:f},{default:(0,a.w5)((()=>[(0,a.Uk)("取消")])),_:1}),"goodsTable"===e.eventMark?((0,a.wg)(),(0,a.j4)(V,{key:0,type:"primary",onClick:p},{default:(0,a.w5)((()=>[(0,a.Uk)(" 更新 ")])),_:1})):((0,a.wg)(),(0,a.j4)(V,{key:1,type:"primary",onClick:p},{default:(0,a.w5)((()=>[(0,a.Uk)(" 添加 ")])),_:1}))])])),default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"商品名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:(0,s.SU)(l).form.goodsName,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,s.SU)(l).form.goodsName=e),autocomplete:"off",style:{width:"300px"},placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"商品数量"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:(0,s.SU)(l).form.goodsNumber,"onUpdate:modelValue":d[1]||(d[1]=e=>(0,s.SU)(l).form.goodsNumber=e),step:1},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"商品价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:(0,s.SU)(l).form.goodsPrice,"onUpdate:modelValue":d[2]||(d[2]=e=>(0,s.SU)(l).form.goodsPrice=e),precision:2,step:.5},null,8,["modelValue","step"])])),_:1}),(0,a.Wm)(u,{label:"商品分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:(0,s.SU)(l).form.goodsClass,"onUpdate:modelValue":d[3]||(d[3]=e=>(0,s.SU)(l).form.goodsClass=e),placeholder:"请选择分类",clearable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(c),(e=>((0,a.wg)(),(0,a.j4)(v,{key:e.id,label:e.className,value:e.className},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"商品图片"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{class:"avatar-uploader",action:"http://127.0.0.1:7171/api/goods/upImg","show-file-list":!1,"on-success":i,"before-upload":g,name:"goods_img"},{default:(0,a.w5)((()=>[(0,s.SU)(l).form.goods_img?((0,a.wg)(),(0,a.iD)("img",{key:0,src:(0,s.SU)(l).form.goods_img,class:"avatar"},null,8,r)):((0,a.wg)(),(0,a.j4)(w,{key:1,class:"avatar-uploader-icon"},{default:(0,a.w5)((()=>[(0,a.Wm)(b)])),_:1}))])),_:1})])),_:1}),(0,a.Wm)(u,{label:"商品描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(t,{modelValue:(0,s.SU)(l).form.goodsDescribe,"onUpdate:modelValue":d[4]||(d[4]=e=>(0,s.SU)(l).form.goodsDescribe=e),autocomplete:"off",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model-value"])}}},c=l(89);const i=(0,c.Z)(n,[["__scopeId","data-v-bf04f036"]]);var g=i},907:function(e,o,l){l.r(o),l.d(o,{default:function(){return _}});var a=l(3396),s=l(4870),d=l(3668),t=(l(7247),l(2728));l(5743);const u=e=>((0,a.dD)("data-v-25fe856a"),e=e(),(0,a.Cn)(),e),r={class:"item date"},m=u((()=>(0,a._)("span",{class:"name"},"日期",-1))),n={class:"item classes"},c=u((()=>(0,a._)("span",{class:"name"},"商品类别",-1))),i={class:"item goodsName"},g=u((()=>(0,a._)("span",{class:"name"},"商品名称",-1)));var p={__name:"index",setup(e){const o=(0,s.qj)({date:"",goodsClass:"",goodsName:""}),l=(0,s.qj)({goodsName:"",goodsNumber:0,goodsPrice:0,goodsClass:"",goods_img:null,goodsDescribe:""});let u=(0,s.iH)(!1);const p=(0,a.Fl)((()=>t.Z.state.classes.classList)),f=(0,s.iH)("searchGoods"),v=(0,a.Fl)((()=>t.Z.state.appSwitch.currentPage));let _=(0,s.iH)(!1);const b=()=>{o.date||o.goodsName||o.goodsClass?(_.value=!0,o.page=v.value,t.Z.dispatch("goods/getSearchGoods",o),_.value=!1):(_.value=!1,t.Z.dispatch("goods/getGoodsList",v.value))},w=()=>{u.value=!0},U=e=>{u.value=e},k=e=>{l.goods_img=e};return(0,a.YP)(v,((e,l)=>{e!==l&&(!0===_.value?(_.value=!1,o.page=v.value,t.Z.dispatch("goods/getSearchGoods",o)):t.Z.dispatch("goods/getGoodsList",v.value))})),(e,t)=>{const v=(0,a.up)("el-date-picker"),_=(0,a.up)("el-option"),V=(0,a.up)("el-select"),h=(0,a.up)("el-input"),W=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[m,(0,a.Wm)(v,{modelValue:o.date,"onUpdate:modelValue":t[0]||(t[0]=e=>o.date=e),type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:""},null,8,["modelValue"])]),(0,a._)("div",n,[c,(0,a.Wm)(V,{modelValue:o.goodsClass,"onUpdate:modelValue":t[1]||(t[1]=e=>o.goodsClass=e),placeholder:"请选择分类",clearable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(p),(e=>((0,a.wg)(),(0,a.j4)(_,{key:e.id,label:e.className,value:e.className},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a._)("div",i,[g,(0,a.Wm)(h,{modelValue:o.goodsName,"onUpdate:modelValue":t[2]||(t[2]=e=>o.goodsName=e),placeholder:"请输入内容",clearable:""},null,8,["modelValue"])]),(0,a.Wm)(W,{class:"btn1",type:"primary",onClick:b},{default:(0,a.w5)((()=>[(0,a.Uk)("查询")])),_:1}),(0,a.Wm)(W,{class:"btn2",type:"success",onClick:w},{default:(0,a.w5)((()=>[(0,a.Uk)("弹窗添加")])),_:1}),(0,a.Wm)(W,{class:"btn3",type:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("页面添加")])),_:1}),(0,a.Wm)(d.Z,{isDialog:(0,s.SU)(u),form:l,eventMark:f.value,onIsDialogGoods:U,onSendImg:k},null,8,["isDialog","form","eventMark"])],64)}}},f=l(89);const v=(0,f.Z)(p,[["__scopeId","data-v-25fe856a"]]);var _=v}}]);
//# sourceMappingURL=907.71f2ae47.js.map