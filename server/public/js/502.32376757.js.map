{"version":3,"file":"js/502.32376757.js","mappings":"8PAmBA,MAAMA,GAAQC,EAAAA,EAAAA,MAERC,IADQC,EAAAA,EAAAA,OACCC,EAAAA,EAAAA,OAKTC,GAAQC,EAAAA,EAAAA,KAAS,IACkB,cAAnCJ,EAAOK,aAAaC,MAAMC,KACrBT,EAAMU,MAAMC,MAAMN,OAChBH,EAAOK,aAAaC,MAAMC,KAC5BT,EAAMU,MAAME,MAAMP,SAKvBQ,GAAWP,EAAAA,EAAAA,KAAS,IACe,cAAnCJ,EAAOK,aAAaC,MAAMC,KACrBT,EAAMU,MAAMC,MAAME,UAChBX,EAAOK,aAAaC,MAAMC,KAC5BT,EAAMU,MAAME,MAAMC,YAKvBC,GAAcR,EAAAA,EAAAA,KAAS,IAAMN,EAAMU,MAAMK,UAAUD,cAEnDE,EAAiBC,IAGrBjB,EAAMkB,OAAO,uBAAwBD,EAAI,E,iSC9C3C,MAAME,EAAc,EAEpB,O,oRCsBA,MAAMnB,GAAQC,EAAAA,EAAAA,MAMRa,IALQX,EAAAA,EAAAA,OACCC,EAAAA,EAAAA,OAEDE,EAAAA,EAAAA,KAAS,IAAMN,EAAMU,MAAMC,MAAMN,SAE3BC,EAAAA,EAAAA,KAAS,IAAMN,EAAMU,MAAMK,UAAUD,eACzDM,EAAAA,EAAAA,UAAkB,OAAQN,EAAYN,OAEtC,MAAMa,EAAe,KACnBrB,EAAMsB,SAAS,qBAAsBR,EAAYN,MAAM,EAEzDe,YAAW,KACTF,GAAc,GACb,KAEH,MAAMG,GAAYlB,EAAAA,EAAAA,KAAS,IAAMN,EAAMU,MAAMC,MAAMa,Y,OAEnDC,EAAAA,EAAAA,KAAmB,CAACC,EAAIC,KACtBP,EAAAA,EAAAA,aAAqB,QACrBpB,EAAMkB,OAAO,uBAAwB,EAAE,I,iNCzCzC,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,gcCgFA,MAAMS,GAAaC,EAAAA,EAAAA,IAAS,CAC1BC,KAAM,GACNC,WAAY,GACZC,UAAW,KAEPC,GAAOJ,EAAAA,EAAAA,IAAS,CACpBG,UAAW,GACXE,YAAa,EACbC,WAAY,EACZJ,WAAY,GACZK,UAAW,KACXC,cAAe,KAEjB,IAAIC,GAAWC,EAAAA,EAAAA,KAAI,GACnB,MAAMC,GAAYlC,EAAAA,EAAAA,KAAS,IAAMN,EAAAA,EAAAA,MAAAA,QAAAA,YAC3ByC,GAAYF,EAAAA,EAAAA,IAAI,eAChBzB,GAAcR,EAAAA,EAAAA,KAAS,IAAMN,EAAAA,EAAAA,MAAAA,UAAAA,cACnC,IAAI0C,GAAWH,EAAAA,EAAAA,KAAI,GAEnB,MAAMI,EAAS,KAERf,EAAWE,MAASF,EAAWI,WAAcJ,EAAWG,YAI3DW,EAASlC,OAAQ,EACjBoB,EAAWgB,KAAO9B,EAAYN,MAC9BR,EAAAA,EAAAA,SAAe,uBAAwB4B,GACvCc,EAASlC,OAAQ,IANjBkC,EAASlC,OAAQ,EACjBR,EAAAA,EAAAA,SAAe,qBAAsBc,EAAYN,OAMnD,EAGIqC,EAAc,KAClBP,EAAS9B,OAAQ,CAAI,EAEjBsC,EAAiBC,IACrBT,EAAS9B,MAAQuC,CAAG,EAEhBC,EAAWD,IACfd,EAAKG,UAAYW,CAAG,E,OAStBE,EAAAA,EAAAA,IACEnC,GACA,CAACoC,EAAQC,KACHD,IAAWC,KAEU,IAAnBT,EAASlC,OACXkC,EAASlC,OAAQ,EACjBoB,EAAWgB,KAAO9B,EAAYN,MAC9BR,EAAAA,EAAAA,SAAe,uBAAwB4B,IAEvC5B,EAAAA,EAAAA,SAAe,qBAAsBc,EAAYN,OAErD,I,i1CC9IJ,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vj-admin/./src/components/pages/index.vue","webpack://vj-admin/./src/components/pages/index.vue?9f3e","webpack://vj-admin/./src/views/goods/goodsList/index.vue","webpack://vj-admin/./src/views/goods/goodsList/index.vue?4ad9","webpack://vj-admin/./src/views/goods/goodsList/searchGoods/index.vue","webpack://vj-admin/./src/views/goods/goodsList/searchGoods/index.vue?a3cb"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <el-pagination\r\n      background\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      :total=\"total\"\r\n      :page-size=\"pageSize\"\r\n      :current-page=\"currentPage\"\r\n      @current-change=\"currentChange\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, defineProps, computed, defineEmits } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport storage from '@/utils/storage.js'\r\nconst store = useStore()\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n// const emits = defineEmits(['currentChange'])\r\n// emits('currentChange', currentPage)\r\n\r\n// console.log(router.currentRoute.value.name)\r\nconst total = computed(() => {\r\n  if (router.currentRoute.value.name === 'goodsList') {\r\n    return store.state.goods.total\r\n  } else if (router.currentRoute.value.name == 'orderList' || 'collect') {\r\n    return store.state.order.total\r\n  } else {\r\n    return 10\r\n  }\r\n})\r\nconst pageSize = computed(() => {\r\n  if (router.currentRoute.value.name === 'goodsList') {\r\n    return store.state.goods.pageSize\r\n  } else if (router.currentRoute.value.name == 'orderList' || 'collect') {\r\n    return store.state.order.pageSize\r\n  } else {\r\n    return 10\r\n  }\r\n})\r\nconst currentPage = computed(() => store.state.appSwitch.currentPage)\r\n//当前页改变时触发。\r\nconst currentChange = (val) => {\r\n  // console.log(`当前页: ${val}`)\r\n  // store.commit('goods/changePage', val)\r\n  store.commit('appSwitch/changePage', val)\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"wrapper-goods\" v-show=\"goodsList\">\r\n    <header class=\"search\">\r\n      <SearchGoods></SearchGoods>\r\n    </header>\r\n    <main class=\"table\">\r\n      <GoodsTable></GoodsTable>\r\n    </main>\r\n    <footer class=\"page\">\r\n      <Pages></Pages>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport SearchGoods from '@/views/goods/goodsList/searchGoods/index.vue'\r\nimport GoodsTable from '@/views/goods/goodsList/goodsTable/index.vue'\r\nimport Pages from '@/components/pages/index.vue'\r\nimport { ref, onMounted, computed, watch } from 'vue'\r\nimport {\r\n  useRoute,\r\n  useRouter,\r\n  onBeforeRouteLeave,\r\n  onBeforeRouteUpdate\r\n} from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport storage from '@/utils/storage.js'\r\nconst store = useStore()\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst total = computed(() => store.state.goods.total)\r\n//初次加载就在本地加入页码\r\nconst currentPage = computed(() => store.state.appSwitch.currentPage)\r\nstorage.setItem_s('page', currentPage.value)\r\n//初始化加载列表数据\r\nconst getGoodsList = () => {\r\n  store.dispatch('goods/getGoodsList', currentPage.value)\r\n}\r\nsetTimeout(() => {\r\n  getGoodsList()\r\n}, 300)\r\n\r\nconst goodsList = computed(() => store.state.goods.goodsList)\r\n//离开组件时将初始化分页。\r\nonBeforeRouteLeave((to, from) => {\r\n  storage.removeItem_s('page')\r\n  store.commit('appSwitch/changePage', 1)\r\n})\r\n// const currentPath = ref(router.currentRoute.value.path)\r\n// watch(\r\n//   currentPath,\r\n//   (newVal, oldVal) => {\r\n//     if (newVal == '/goods/goodsList') {\r\n//       // console.log('***', newVal)\r\n//       storage.setItem_s('goodsPage', currentPage.value)\r\n//     } else {\r\n//       storage.removeItem_s('goodsPage')\r\n//     }\r\n//   },\r\n//   { immediate: true, deep: true }\r\n// )\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper-goods {\r\n  margin-top: 10px;\r\n}\r\n.search {\r\n  width: 100%;\r\n  height: 65px;\r\n  background-color: rgba(255, 255, 255, 1);\r\n  box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px;\r\n}\r\n.table {\r\n  width: 100%;\r\n  min-height: 280px;\r\n  // background-color: rgba(255, 255, 255, 1);\r\n  // box-shadow: 0 2px 12px 0 rgb(0 0 0 / 10%);\r\n  margin-top: 20px;\r\n  // padding: 10px;\r\n}\r\n.page {\r\n  margin-top: 20px;\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=166937ee&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\code\\\\x2-project\\\\VJ-Admin\\\\vj-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-166937ee\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"item date\">\r\n    <span class=\"name\">日期</span>\r\n    <el-date-picker\r\n      v-model=\"searchForm.date\"\r\n      type=\"daterange\"\r\n      range-separator=\"-\"\r\n      start-placeholder=\"开始时间\"\r\n      end-placeholder=\"结束时间\"\r\n      clearable\r\n    />\r\n  </div>\r\n  <div class=\"item classes\">\r\n    <span class=\"name\">商品类别</span>\r\n    <el-select\r\n      v-model=\"searchForm.goodsClass\"\r\n      placeholder=\"请选择分类\"\r\n      clearable\r\n    >\r\n      <el-option\r\n        v-for=\"item in classList\"\r\n        :key=\"item.id\"\r\n        :label=\"item.className\"\r\n        :value=\"item.className\"\r\n      />\r\n    </el-select>\r\n  </div>\r\n  <div class=\"item goodsName\">\r\n    <span class=\"name\">商品名称</span>\r\n    <el-input\r\n      v-model=\"searchForm.goodsName\"\r\n      placeholder=\"请输入内容\"\r\n      clearable\r\n    />\r\n  </div>\r\n  <!--  -->\r\n  <el-button class=\"btn1\" type=\"primary\" @click=\"search\">查询</el-button>\r\n  <el-button class=\"btn2\" type=\"success\" @click=\"addGoodsLog\"\r\n    >弹窗添加</el-button\r\n  >\r\n  <el-button class=\"btn3\" type=\"primary\">页面添加</el-button>\r\n  <!-- 弹框 -->\r\n  <GoodsDialog\r\n    :isDialog=\"isDialog\"\r\n    :form=\"form\"\r\n    :eventMark=\"eventMark\"\r\n    @isDialogGoods=\"isDialogGoods\"\r\n    @sendImg=\"sendImg\"\r\n  ></GoodsDialog>\r\n  <!-- <el-dialog v-model=\"isDialog\" title=\"添加商品\">\r\n    <el-form destroy-on-close>\r\n      <el-form-item label=\"商品名称\">\r\n        <el-input v-model=\"form.goodsName\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品数量\">\r\n        <el-input v-model=\"form.goodsNumber\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品价格\">\r\n        <el-input v-model=\"form.goodsPrice\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品分类\">\r\n        <el-input v-model=\"form.goodsClass\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\">\r\n        <el-input v-model=\"form.goods_img\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述\">\r\n        <el-input v-model=\"form.goodsDescribe\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"isDialog = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirm\"> 添加 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog> -->\r\n</template>\r\n\r\n<script setup>\r\nimport GoodsDialog from '@/components/goodsDialog/index.vue'\r\nimport { ref, reactive, onMounted, computed, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport storage from '@/utils/storage.js'\r\nimport store from '@/store'\r\nimport dayjs from 'dayjs'\r\nimport { ElMessage } from 'element-plus'\r\nconst searchForm = reactive({\r\n  date: '',\r\n  goodsClass: '',\r\n  goodsName: ''\r\n})\r\nconst form = reactive({\r\n  goodsName: '',\r\n  goodsNumber: 0,\r\n  goodsPrice: 0,\r\n  goodsClass: '',\r\n  goods_img: null,\r\n  goodsDescribe: ''\r\n})\r\nlet isDialog = ref(false)\r\nconst classList = computed(() => store.state.classes.classList)\r\nconst eventMark = ref('searchGoods') //传事件标识，dialog子组件依据标识判断\r\nconst currentPage = computed(() => store.state.appSwitch.currentPage)\r\nlet isSearch = ref(false) //标识是否是搜索状态，搜索状态就传页码到搜索请求。\r\n//搜索\r\nconst search = () => {\r\n  // store.commit('goods/changePage', 1)\r\n  if (!searchForm.date && !searchForm.goodsName && !searchForm.goodsClass) {\r\n    isSearch.value = false\r\n    store.dispatch('goods/getGoodsList', currentPage.value)\r\n  } else {\r\n    isSearch.value = true //开启搜索状态标识\r\n    searchForm.page = currentPage.value //添加page属性到searchForm\r\n    store.dispatch('goods/getSearchGoods', searchForm)\r\n    isSearch.value = false\r\n  }\r\n}\r\n//添加\r\nconst addGoodsLog = () => {\r\n  isDialog.value = true\r\n}\r\nconst isDialogGoods = (emi) => {\r\n  isDialog.value = emi\r\n}\r\nconst sendImg = (emi) => {\r\n  form.goods_img = emi\r\n}\r\n// const confirm = () => {\r\n//   store.dispatch('goods/addGoods', form)\r\n//   setTimeout(() => {\r\n//     store.dispatch('goods/getGoodsList', currentPage.value)\r\n//   }, 500)\r\n//   isDialog.value = false\r\n// }\r\nwatch(\r\n  currentPage,\r\n  (newVal, oldVal) => {\r\n    if (newVal !== oldVal) {\r\n      //如果搜索状态标识为true，那么请求的是搜索列表，否则为默认数据列表。\r\n      if (isSearch.value === true) {\r\n        isSearch.value = false\r\n        searchForm.page = currentPage.value\r\n        store.dispatch('goods/getSearchGoods', searchForm)\r\n      } else {\r\n        store.dispatch('goods/getGoodsList', currentPage.value)\r\n      }\r\n    }\r\n  }\r\n  // { immediate: true, deep: true }\r\n)\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item {\r\n  margin-right: 13px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .name {\r\n    font-size: 14px;\r\n    color: rgba(0, 0, 0, 0.7);\r\n    margin-right: 7px;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n//1.日期\r\n.date {\r\n  width: 20%;\r\n  ::v-deep .el-input__wrapper {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n//2.选项分类\r\n.classes {\r\n  width: 22%;\r\n  ::v-deep .el-input {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n//3.商品名称\r\n.goodsName {\r\n  width: 22%;\r\n  ::v-deep .el-input {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n\r\n//按钮\r\n.el-button {\r\n  width: 6%;\r\n  height: 35px;\r\n  // margin-left: 20px;\r\n}\r\n.btn1 {\r\n  margin-left: 15px;\r\n}\r\n.btn2,\r\n.btn3 {\r\n  width: 8%;\r\n  margin-left: 20px;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=25fe856a&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\code\\\\x2-project\\\\VJ-Admin\\\\vj-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-25fe856a\"]])\n\nexport default __exports__"],"names":["store","useStore","router","useRoute","useRouter","total","computed","currentRoute","value","name","state","goods","order","pageSize","currentPage","appSwitch","currentChange","val","commit","__exports__","storage","getGoodsList","dispatch","setTimeout","goodsList","onBeforeRouteLeave","to","from","searchForm","reactive","date","goodsClass","goodsName","form","goodsNumber","goodsPrice","goods_img","goodsDescribe","isDialog","ref","classList","eventMark","isSearch","search","page","addGoodsLog","isDialogGoods","emi","sendImg","watch","newVal","oldVal"],"sourceRoot":""}