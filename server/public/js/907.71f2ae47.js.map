{"version":3,"file":"js/907.71f2ae47.js","mappings":"2GAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,uSC2FXI,GAAQC,EAAAA,EAAAA,MAiBRC,IAhBQC,EAAAA,EAAAA,OACCC,EAAAA,EAAAA,OACEC,EAAAA,EAAAA,KAAI,IAcHC,EAAAA,EAAAA,KAAS,IAAMN,EAAMO,MAAMC,QAAQN,aAI/CO,IAHcH,EAAAA,EAAAA,KAAS,IAAMN,EAAMO,MAAMG,MAAMC,cAGlCC,IAEjBC,EAAM,UAAWD,EAAIE,KAAK,GAEtBC,EAAgBC,IACpB,MAAMC,EAAsB,eAAdD,EAAKE,KACbC,EAASH,EAAKI,KAAO,KAAO,KAAO,EAOzC,OANKH,GACHI,EAAAA,GAAAA,MAAgB,qBAEbF,GACHE,EAAAA,GAAAA,MAAgB,qBAEXJ,GAASE,CAAM,EAGlBG,EAAU,KAEZ3B,EAAM4B,KAAKC,WACX7B,EAAM4B,KAAKE,aACX9B,EAAM4B,KAAKG,YACX/B,EAAM4B,KAAKI,WAGa,gBAApBhC,EAAMiC,UACR5B,EAAM6B,SAAS,iBAAkBlC,EAAM4B,MAIV,eAApB5B,EAAMiC,UACf5B,EAAM6B,SAAS,oBAAqBlC,EAAM4B,MAK1CO,QAAQC,IAAI,WAGdV,EAAAA,GAAAA,QAAkB,qBAGpBR,EAAM,iBAAiB,EAAM,EAEzBmB,EAAc,KAElBnB,EAAM,iBAAiB,EAAM,E,wqFC/J/B,MAAMoB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,gcC+EA,MAAMC,GAAaC,EAAAA,EAAAA,IAAS,CAC1BC,KAAM,GACNT,WAAY,GACZH,UAAW,KAEPD,GAAOY,EAAAA,EAAAA,IAAS,CACpBX,UAAW,GACXC,YAAa,EACbC,WAAY,EACZC,WAAY,GACZU,UAAW,KACXC,cAAe,KAEjB,IAAIC,GAAWlC,EAAAA,EAAAA,KAAI,GACnB,MAAMH,GAAYI,EAAAA,EAAAA,KAAS,IAAMN,EAAAA,EAAAA,MAAAA,QAAAA,YAC3B4B,GAAYvB,EAAAA,EAAAA,IAAI,eAChBM,GAAcL,EAAAA,EAAAA,KAAS,IAAMN,EAAAA,EAAAA,MAAAA,UAAAA,cACnC,IAAIwC,GAAWnC,EAAAA,EAAAA,KAAI,GAEnB,MAAMoC,EAAS,KAERP,EAAWE,MAASF,EAAWV,WAAcU,EAAWP,YAI3Da,EAASE,OAAQ,EACjBR,EAAWS,KAAOhC,EAAY+B,MAC9B1C,EAAAA,EAAAA,SAAe,uBAAwBkC,GACvCM,EAASE,OAAQ,IANjBF,EAASE,OAAQ,EACjB1C,EAAAA,EAAAA,SAAe,qBAAsBW,EAAY+B,OAMnD,EAGIE,EAAc,KAClBL,EAASG,OAAQ,CAAI,EAEjBG,EAAiBC,IACrBP,EAASG,MAAQI,CAAG,EAEhBC,EAAWD,IACfvB,EAAKc,UAAYS,CAAG,E,OAStBE,EAAAA,EAAAA,IACErC,GACA,CAACsC,EAAQC,KACHD,IAAWC,KAEU,IAAnBV,EAASE,OACXF,EAASE,OAAQ,EACjBR,EAAWS,KAAOhC,EAAY+B,MAC9B1C,EAAAA,EAAAA,SAAe,uBAAwBkC,IAEvClC,EAAAA,EAAAA,SAAe,qBAAsBW,EAAY+B,OAErD,I,i1CC9IJ,MAAMT,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vj-admin/./node_modules/vue-loader/dist/exportHelper.js","webpack://vj-admin/./src/components/goodsDialog/index.vue","webpack://vj-admin/./src/components/goodsDialog/index.vue?d39e","webpack://vj-admin/./src/views/goods/goodsList/searchGoods/index.vue","webpack://vj-admin/./src/views/goods/goodsList/searchGoods/index.vue?a3cb"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <el-dialog\r\n    :model-value=\"props.isDialog\"\r\n    title=\"编辑\"\r\n    destroy-on-close\r\n    @before-close=\"beforeClose\"\r\n    @close=\"beforeClose\"\r\n    draggable\r\n  >\r\n    <el-form>\r\n      <el-form-item label=\"商品名称\">\r\n        <el-input\r\n          v-model=\"props.form.goodsName\"\r\n          autocomplete=\"off\"\r\n          style=\"width: 300px\"\r\n          placeholder=\"请输入名称\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品数量\">\r\n        <el-input-number v-model=\"props.form.goodsNumber\" :step=\"1\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品价格\">\r\n        <el-input-number\r\n          v-model=\"props.form.goodsPrice\"\r\n          :precision=\"2\"\r\n          :step=\"0.5\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品分类\">\r\n        <el-select\r\n          v-model=\"props.form.goodsClass\"\r\n          placeholder=\"请选择分类\"\r\n          clearable\r\n        >\r\n          <el-option\r\n            v-for=\"item in classList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.className\"\r\n            :value=\"item.className\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          action=\"http://127.0.0.1:7171/api/goods/upImg\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"onSuccess\"\r\n          :before-upload=\"beforeUpload\"\r\n          name=\"goods_img\"\r\n        >\r\n          <img\r\n            v-if=\"props.form.goods_img\"\r\n            :src=\"props.form.goods_img\"\r\n            class=\"avatar\"\r\n          />\r\n          <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述\">\r\n        <el-input\r\n          v-model=\"props.form.goodsDescribe\"\r\n          autocomplete=\"off\"\r\n          type=\"textarea\"\r\n        />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"beforeClose\">取消</el-button>\r\n        <el-button\r\n          v-if=\"eventMark === 'goodsTable'\"\r\n          type=\"primary\"\r\n          @click=\"confirm\"\r\n        >\r\n          更新\r\n        </el-button>\r\n        <el-button v-else type=\"primary\" @click=\"confirm\"> 添加 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  ref,\r\n  reactive,\r\n  onMounted,\r\n  computed,\r\n  watch,\r\n  defineProps,\r\n  defineEmits\r\n} from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport { ElMessage } from 'element-plus'\r\nimport storage from '@/utils/storage.js'\r\n// import { upImgApi } from '@/api/goods'\r\n// http://127.0.0.1:7171/api/goods/upImg\r\nconst emits = defineEmits(['isDialogGoods', 'sendImg'])\r\nconst store = useStore()\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst isDialog = ref(false)\r\n// let form = reactive({\r\n//   goodsName: '',\r\n//   goodsNumber: 0,\r\n//   goodsPrice: 0,\r\n//   goodsClass: '',\r\n//   goods_img: '',\r\n//   goodsDescribe: ''\r\n// })\r\nlet props = defineProps({\r\n  isDialog: Boolean,\r\n  form: Object,\r\n  eventMark: String\r\n})\r\nconst classList = computed(() => store.state.classes.classList)\r\nconst currentPage = computed(() => store.state.goods.currentPage)\r\n\r\n//图片\r\nconst onSuccess = (res) => {\r\n  // 上传成功的回调，用作把上传的图片赋值到客户端显示出来！\r\n  emits('sendImg', res.data)\r\n}\r\nconst beforeUpload = (file) => {\r\n  const isJPG = file.type === 'image/jpeg'\r\n  const isLt2M = file.size / 1024 / 1024 < 2\r\n  if (!isJPG) {\r\n    ElMessage.error('上传头像图片只能是 JPG 格式!')\r\n  }\r\n  if (!isLt2M) {\r\n    ElMessage.error('上传头像图片大小不能超过 2MB!')\r\n  }\r\n  return isJPG && isLt2M\r\n}\r\n//确认\r\nconst confirm = () => {\r\n  if (\r\n    props.form.goodsName &&\r\n    props.form.goodsNumber &&\r\n    props.form.goodsPrice &&\r\n    props.form.goodsClass\r\n  ) {\r\n    //根据标识区分父组件\r\n    if (props.eventMark === 'searchGoods') {\r\n      store.dispatch('goods/addGoods', props.form)\r\n      // setTimeout(() => {\r\n      //   store.dispatch('goods/getGoodsList', currentPage.value)\r\n      // }, 500)\r\n    } else if (props.eventMark === 'goodsTable') {\r\n      store.dispatch('goods/updateGoods', props.form)\r\n      // setTimeout(() => {\r\n      //   store.dispatch('goods/getGoodsList', currentPage.value)\r\n      // }, 500)\r\n    } else {\r\n      console.log('未知的事件标识')\r\n    }\r\n  } else {\r\n    ElMessage.warning('商品名称、价格、数量或类别不能为空')\r\n  }\r\n  // isDialog.value = false\r\n  emits('isDialogGoods', false)\r\n}\r\nconst beforeClose = () => {\r\n  //关闭前的回调\r\n  emits('isDialogGoods', false)\r\n}\r\n// const close=()=>{\r\n//   //关闭的回调\r\n//   emits('isDialogGoods', false)\r\n// }\r\n//props是单向数据流，所以要关闭就要emit发送关闭信号给父组件,再让父组件传过来关闭信号！\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n//上传图片\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n<style>\r\n/* 上传图片 */\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed var(--el-border-color);\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=bf04f036&lang=scss&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=bf04f036&lang=css\"\n\nimport exportComponent from \"D:\\\\code\\\\x2-project\\\\VJ-Admin\\\\vj-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bf04f036\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"item date\">\r\n    <span class=\"name\">日期</span>\r\n    <el-date-picker\r\n      v-model=\"searchForm.date\"\r\n      type=\"daterange\"\r\n      range-separator=\"-\"\r\n      start-placeholder=\"开始时间\"\r\n      end-placeholder=\"结束时间\"\r\n      clearable\r\n    />\r\n  </div>\r\n  <div class=\"item classes\">\r\n    <span class=\"name\">商品类别</span>\r\n    <el-select\r\n      v-model=\"searchForm.goodsClass\"\r\n      placeholder=\"请选择分类\"\r\n      clearable\r\n    >\r\n      <el-option\r\n        v-for=\"item in classList\"\r\n        :key=\"item.id\"\r\n        :label=\"item.className\"\r\n        :value=\"item.className\"\r\n      />\r\n    </el-select>\r\n  </div>\r\n  <div class=\"item goodsName\">\r\n    <span class=\"name\">商品名称</span>\r\n    <el-input\r\n      v-model=\"searchForm.goodsName\"\r\n      placeholder=\"请输入内容\"\r\n      clearable\r\n    />\r\n  </div>\r\n  <!--  -->\r\n  <el-button class=\"btn1\" type=\"primary\" @click=\"search\">查询</el-button>\r\n  <el-button class=\"btn2\" type=\"success\" @click=\"addGoodsLog\"\r\n    >弹窗添加</el-button\r\n  >\r\n  <el-button class=\"btn3\" type=\"primary\">页面添加</el-button>\r\n  <!-- 弹框 -->\r\n  <GoodsDialog\r\n    :isDialog=\"isDialog\"\r\n    :form=\"form\"\r\n    :eventMark=\"eventMark\"\r\n    @isDialogGoods=\"isDialogGoods\"\r\n    @sendImg=\"sendImg\"\r\n  ></GoodsDialog>\r\n  <!-- <el-dialog v-model=\"isDialog\" title=\"添加商品\">\r\n    <el-form destroy-on-close>\r\n      <el-form-item label=\"商品名称\">\r\n        <el-input v-model=\"form.goodsName\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品数量\">\r\n        <el-input v-model=\"form.goodsNumber\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品价格\">\r\n        <el-input v-model=\"form.goodsPrice\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品分类\">\r\n        <el-input v-model=\"form.goodsClass\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\">\r\n        <el-input v-model=\"form.goods_img\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述\">\r\n        <el-input v-model=\"form.goodsDescribe\" autocomplete=\"off\" />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"isDialog = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirm\"> 添加 </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog> -->\r\n</template>\r\n\r\n<script setup>\r\nimport GoodsDialog from '@/components/goodsDialog/index.vue'\r\nimport { ref, reactive, onMounted, computed, watch } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport storage from '@/utils/storage.js'\r\nimport store from '@/store'\r\nimport dayjs from 'dayjs'\r\nimport { ElMessage } from 'element-plus'\r\nconst searchForm = reactive({\r\n  date: '',\r\n  goodsClass: '',\r\n  goodsName: ''\r\n})\r\nconst form = reactive({\r\n  goodsName: '',\r\n  goodsNumber: 0,\r\n  goodsPrice: 0,\r\n  goodsClass: '',\r\n  goods_img: null,\r\n  goodsDescribe: ''\r\n})\r\nlet isDialog = ref(false)\r\nconst classList = computed(() => store.state.classes.classList)\r\nconst eventMark = ref('searchGoods') //传事件标识，dialog子组件依据标识判断\r\nconst currentPage = computed(() => store.state.appSwitch.currentPage)\r\nlet isSearch = ref(false) //标识是否是搜索状态，搜索状态就传页码到搜索请求。\r\n//搜索\r\nconst search = () => {\r\n  // store.commit('goods/changePage', 1)\r\n  if (!searchForm.date && !searchForm.goodsName && !searchForm.goodsClass) {\r\n    isSearch.value = false\r\n    store.dispatch('goods/getGoodsList', currentPage.value)\r\n  } else {\r\n    isSearch.value = true //开启搜索状态标识\r\n    searchForm.page = currentPage.value //添加page属性到searchForm\r\n    store.dispatch('goods/getSearchGoods', searchForm)\r\n    isSearch.value = false\r\n  }\r\n}\r\n//添加\r\nconst addGoodsLog = () => {\r\n  isDialog.value = true\r\n}\r\nconst isDialogGoods = (emi) => {\r\n  isDialog.value = emi\r\n}\r\nconst sendImg = (emi) => {\r\n  form.goods_img = emi\r\n}\r\n// const confirm = () => {\r\n//   store.dispatch('goods/addGoods', form)\r\n//   setTimeout(() => {\r\n//     store.dispatch('goods/getGoodsList', currentPage.value)\r\n//   }, 500)\r\n//   isDialog.value = false\r\n// }\r\nwatch(\r\n  currentPage,\r\n  (newVal, oldVal) => {\r\n    if (newVal !== oldVal) {\r\n      //如果搜索状态标识为true，那么请求的是搜索列表，否则为默认数据列表。\r\n      if (isSearch.value === true) {\r\n        isSearch.value = false\r\n        searchForm.page = currentPage.value\r\n        store.dispatch('goods/getSearchGoods', searchForm)\r\n      } else {\r\n        store.dispatch('goods/getGoodsList', currentPage.value)\r\n      }\r\n    }\r\n  }\r\n  // { immediate: true, deep: true }\r\n)\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item {\r\n  margin-right: 13px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .name {\r\n    font-size: 14px;\r\n    color: rgba(0, 0, 0, 0.7);\r\n    margin-right: 7px;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n//1.日期\r\n.date {\r\n  width: 20%;\r\n  ::v-deep .el-input__wrapper {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n//2.选项分类\r\n.classes {\r\n  width: 22%;\r\n  ::v-deep .el-input {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n//3.商品名称\r\n.goodsName {\r\n  width: 22%;\r\n  ::v-deep .el-input {\r\n    flex: 1;\r\n    height: 35px;\r\n  }\r\n}\r\n\r\n//按钮\r\n.el-button {\r\n  width: 6%;\r\n  height: 35px;\r\n  // margin-left: 20px;\r\n}\r\n.btn1 {\r\n  margin-left: 15px;\r\n}\r\n.btn2,\r\n.btn3 {\r\n  width: 8%;\r\n  margin-left: 20px;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=25fe856a&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\code\\\\x2-project\\\\VJ-Admin\\\\vj-admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-25fe856a\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","store","useStore","classList","useRoute","useRouter","ref","computed","state","classes","onSuccess","goods","currentPage","res","emits","data","beforeUpload","file","isJPG","type","isLt2M","size","ElMessage","confirm","form","goodsName","goodsNumber","goodsPrice","goodsClass","eventMark","dispatch","console","log","beforeClose","__exports__","searchForm","reactive","date","goods_img","goodsDescribe","isDialog","isSearch","search","value","page","addGoodsLog","isDialogGoods","emi","sendImg","watch","newVal","oldVal"],"sourceRoot":""}